//This is a bookmarklet which will let you generate a JWT from the app Settings page of the SunCo account
//It will take the first credentials from the list of the API Keys presents on the page
//How to use it? Just copy/past this in a bookmark and click on it once you are on the app setting page of the SunCo account.

javascript: document.getElementsByTagName('head')[0].appendChild(document.createElement('script')).src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js";document.getElementsByTagName('head')[0].appendChild(document.createElement('script')).src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/hmac-sha256.min.js";document.getElementsByTagName('head')[0].appendChild(document.createElement('script')).src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/enc-base64.min.js";var tbody = document.getElementsByTagName("tbody")[0];var tds = tbody.getElementsByTagName("td");var id = tds[0].innerText;var secret = tds[1].innerText;var header = {alg: "HS256",typ: "JWT",kid: id};var data = {scope: "app"};function base64url(source) {encodedSource = CryptoJS.enc.Base64.stringify(source);encodedSource = encodedSource.replace(/=+$/, "");encodedSource = encodedSource.replace(/\+/g, "-");encodedSource = encodedSource.replace(/\//g, "_");return encodedSource;}var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));var encodedHeader = base64url(stringifiedHeader);var stringifiedData = CryptoJS.enc.Utf8.parse(JSON.stringify(data));var encodedData = base64url(stringifiedData);var signature = encodedHeader + "." + encodedData;signature = CryptoJS.HmacSHA256(signature, secret);signature = base64url(signature);token = encodedHeader + "." + encodedData + "." + signature;alert("Please open the Console of the developer tools to see your token");console.log(token);
